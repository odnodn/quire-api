var stCurrentUser="curusr",isUser=!1;function _showHeaderIcon(){$("#header-icons").removeClass("hide")}function _updateLoginUser(e){var t=$(".t-user"),i=e.id,s=e.name,n=e.initials,a=e.image,r=e.iconColor;isUser=!0,t.find(".dropdown-header").text(s),t.find(".user-icon-wrapper").append(""!=a?$('<img class="img-icon x30 circle" src="'+a+'" alt="'+s+'">'):$('<div class="img-icon x30 circle bg iconc-'+r+'">'+n+"</div>")),t.find(".icon-user-o").parent().attr("href","/u/"+i),$("#header-wrapper").addClass("qr-collapse-navbar-768"),$("li.login").remove(),$(".workspace").removeClass("hide"),t.removeClass("hide"),_showHeaderIcon()}function _updateNonLoginUser(){$("#header-wrapper").addClass("qr-collapse-navbar"),$("li.workspace, li.t-user").remove(),$(".login").removeClass("hide"),_showHeaderIcon()}function Traverse(e,t){this.$element=e,this.options=$.extend({},Traverse.defaults,this.$element.data(),t),this._init()}window.sendQS=function(e,t,i){var s=$("body").data("qs")||"qs";return $.ajax({type:"POST",url:"/"+s,data:JSON.stringify(e),contentType:"application/json;charset=UTF-8"}).done(t).fail(function(e){if(i)i(e);else{var t=netErrorMsg(e);t&&showAlert($("#body"),t,"alert-danger")}})},$(function(){var e=$("#sidebar");if(e.length){$("#docs");var s=e.find("nav");new Traverse(s,{threshold:10,barOffset:e.position().top});s.on("update.traverse",function(e,t){s.find("section").removeClass("expand");var i=t.parents("section:first");i.length&&i.addClass("expand")});function n(){return r.addClass("sliding"),r.removeClass("slide-right slide-left"),r.find(".drawer-overlay").remove(),a.removeClass("drawer-open drawer-slide-left-large"),!1}var a=$(".drawer-layout"),r=a.find(".drawer");r.on("transitionend webkitTransitionEnd oTransitionEnd",function(){r.removeClass("sliding")}),a.find("[data-drawer-slide]").click(function(e){var t=$(this).data("drawer-slide");a.addClass("drawer-slide-right-large"),r.addClass("slide-"+t),r.addClass("sliding");var i=$('<a href="#" class="drawer-overlay"></a>');return r.append(i),i.click(n),!1}),a.find("[data-drawer-close]").click(n)}sendQS([stCurrentUser,null],function(e){e?_updateLoginUser(e):_updateNonLoginUser()},function(){_updateNonLoginUser(),_showHeaderIcon()})}),Traverse.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"active",deepLinking:!1,barOffset:0},Traverse.prototype._init=function(){var e=this.$element[0].id;this.$targets=$(".introduction .doc-copy > h1, [data-traverse-target]"),this.$links=this.$element.find("a"),this.$element.attr({"data-resize":e,"data-scroll":e,id:e}),this.$active=$(),this.scrollPos=parseInt(window.pageYOffset,10),this._events()},Traverse.prototype.calcPoints=function(){var i=this,e=document.body,t=document.documentElement;this.points=[],this.winHeight=Math.round(Math.max(window.innerHeight,t.clientHeight)),this.docHeight=Math.round(Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)),this.$targets.each(function(){var e=$(this),t=e.offset().top;e.targetPoint=t,i.points.push(t)})},Traverse.prototype._events=function(){var s=this,n=$("html, body"),a={duration:s.options.animationDuration,easing:s.options.animationEasing};$(window).one("load",function(){var t;s.calcPoints(),s._updateActive(),$(this).resize(function(e){s.reflow()}).scroll(function(e){t&&clearTimeout(t),t=setTimeout(function(){s._updateActive()},100)})}),this.$element.on("click",'a[href^="#"]',function(e){e.preventDefault();var t=this.getAttribute("href").replace(/\./g,"\\."),i=$(t).offset().top-s.options.barOffset;n.stop(!0).animate({scrollTop:i},a)})},Traverse.prototype.reflow=function(){this.calcPoints(),this._updateActive()},Traverse.prototype._updateActive=function(){var e,i=parseInt(window.pageYOffset,10);if(i+this.winHeight===this.docHeight)e=this.points.length-1;else if(i<this.points[0])e=0;else{var s=this.scrollPos<i,n=this,t=this.points.filter(function(e,t){return s?e<=i+n.options.barOffset+n.options.threshold:e-(n.options.barOffset+n.options.threshold)<=i});e=t.length?t.length-1:0}var a=this.$active,r=this.$links.eq(e);if(this.$active.removeClass(this.options.activeClass),this.$active=r.addClass(this.options.activeClass),this.options.deepLinking){var o=this.$active[0].getAttribute("href");window.history.pushState?window.history.pushState(null,null,o):window.location.hash=o}this.scrollPos=i,a[0]!==r[0]&&this.$element.trigger("update.traverse",[this.$active])};