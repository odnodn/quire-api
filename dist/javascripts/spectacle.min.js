var stCurrentUser="curusr",isUser=!1;function _showHeaderIcon(){$("#header-icons").removeClass("hide")}function _updateLoginUser(e){var t=null!=getLocalStorage("inCgf")?aws2quire:identity,i=$(".t-user"),s=e.id,n=e.name,r=e.initials,a=t(e.image),o=e.iconColor;isUser=!0,i.find(".dropdown-header").text(n),i.find(".user-icon-wrapper").append(""!=a?$('<img class="img-icon x30 circle" src="'+a+'" alt="'+n+'">'):$('<div class="img-icon x30 circle bg iconc-'+o+'">'+r+"</div>")),i.find(".icon-user-o").parent().attr("href","/u/"+s),$("#header-wrapper").addClass("qr-collapse-navbar-768"),$("li.login").remove(),$(".workspace").removeClass("hide"),i.removeClass("hide"),_showHeaderIcon()}function _updateNonLoginUser(){$("#header-wrapper").addClass("qr-collapse-navbar"),$("li.workspace, li.t-user").remove(),$(".login").removeClass("hide"),_showHeaderIcon()}window.sendQS=function(e,t,i){var s=$("body").data("qs")||"qs";return $.ajax({type:"POST",url:"/"+s,data:JSON.stringify(e),contentType:"application/json;charset=UTF-8"}).done(t).fail(function(e){if(i)i(e);else{var t=netErrorMsg(e);t&&showAlert($("#body"),t,"alert-danger")}})};var s3AwsUrl="https://quire.s3.amazonaws.com",quireS3Prefix="/quis3";function isAwsS3Path(e){return e&&(e.startsWith(s3AwsUrl+"/")||e==s3AwsUrl)}function aws2quire(e){return isAwsS3Path(e)?quireS3Prefix+e.substring(s3AwsUrl.length):e}function identity(e){return e}function getLocalStorage(e,t){try{var i=localStorage[e];return null!=i&&0!=t?JSON.parse(i):i}catch(e){}}function Traverse(e,t){this.$element=e,this.options=$.extend({},Traverse.defaults,this.$element.data(),t),this._init()}$(function(){var e=$("#sidebar");if(e.length){$("#docs");var s=e.find("nav");new Traverse(s,{threshold:10,barOffset:e.position().top});s.on("update.traverse",function(e,t){s.find("section").removeClass("expand");var i=t.parents("section:first");i.length&&i.addClass("expand")});function n(){return a.addClass("sliding"),a.removeClass("slide-right slide-left"),a.find(".drawer-overlay").remove(),r.removeClass("drawer-open drawer-slide-left-large"),!1}var r=$(".drawer-layout"),a=r.find(".drawer");a.on("transitionend webkitTransitionEnd oTransitionEnd",function(){a.removeClass("sliding")}),r.find("[data-drawer-slide]").click(function(e){var t=$(this).data("drawer-slide");r.addClass("drawer-slide-right-large"),a.addClass("slide-"+t),a.addClass("sliding");var i=$('<a href="#" class="drawer-overlay"></a>');return a.append(i),i.click(n),!1}),r.find("[data-drawer-close]").click(n)}sendQS([stCurrentUser,null],function(e){e?_updateLoginUser(e):_updateNonLoginUser()},function(){_updateNonLoginUser(),_showHeaderIcon()})}),Traverse.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"active",deepLinking:!1,barOffset:0},Traverse.prototype._init=function(){var e=this.$element[0].id;this.$targets=$(".introduction .doc-copy > h1, [data-traverse-target]"),this.$links=this.$element.find("a"),this.$element.attr({"data-resize":e,"data-scroll":e,id:e}),this.$active=$(),this.scrollPos=parseInt(window.pageYOffset,10),this._events()},Traverse.prototype.calcPoints=function(){var i=this,e=document.body,t=document.documentElement;this.points=[],this.winHeight=Math.round(Math.max(window.innerHeight,t.clientHeight)),this.docHeight=Math.round(Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)),this.$targets.each(function(){var e=$(this),t=e.offset().top;e.targetPoint=t,i.points.push(t)})},Traverse.prototype._events=function(){var s=this,n=$("html, body"),r={duration:s.options.animationDuration,easing:s.options.animationEasing};$(window).one("load",function(){var t;s.calcPoints(),s._updateActive(),$(this).resize(function(e){s.reflow()}).scroll(function(e){t&&clearTimeout(t),t=setTimeout(function(){s._updateActive()},100)})}),this.$element.on("click",'a[href^="#"]',function(e){e.preventDefault();var t=this.getAttribute("href").replace(/\./g,"\\."),i=$(t).offset().top-s.options.barOffset;n.stop(!0).animate({scrollTop:i},r)})},Traverse.prototype.reflow=function(){this.calcPoints(),this._updateActive()},Traverse.prototype._updateActive=function(){var e,i=parseInt(window.pageYOffset,10);if(i+this.winHeight===this.docHeight)e=this.points.length-1;else if(i<this.points[0])e=0;else{var s=this.scrollPos<i,n=this,t=this.points.filter(function(e,t){return s?e<=i+n.options.barOffset+n.options.threshold:e-(n.options.barOffset+n.options.threshold)<=i});e=t.length?t.length-1:0}var r=this.$active,a=this.$links.eq(e);if(this.$active.removeClass(this.options.activeClass),this.$active=a.addClass(this.options.activeClass),this.options.deepLinking){var o=this.$active[0].getAttribute("href");window.history.pushState?window.history.pushState(null,null,o):window.location.hash=o}this.scrollPos=i,r[0]!==a[0]&&this.$element.trigger("update.traverse",[this.$active])};